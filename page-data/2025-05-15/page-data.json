{"componentChunkName":"component---src-templates-blog-post-js","path":"/2025-05-15/","result":{"data":{"site":{"siteMetadata":{"title":"FE Factory"}},"markdownRemark":{"id":"ff1a04c7-cce7-5ead-8540-4c2f056eec7c","excerpt":"오랜만에 글을 쓰는 것 같다. 그동안 회사일도 많았지만 사이드 프로젝트로 인해 너무 바빠서 블로그 신경을 못 쓴것 같다. 지금도 시간이 많지 않으니 최근 유용하게 사용한 패키지 하나를 후딱 소개하려 한다. Knip Knip…","html":"<p>오랜만에 글을 쓰는 것 같다.<br>\n그동안 회사일도 많았지만 사이드 프로젝트로 인해 너무 바빠서 블로그 신경을 못 쓴것 같다.</p>\n<p>지금도 시간이 많지 않으니 최근 유용하게 사용한 패키지 하나를 후딱 소개하려 한다.</p>\n<h2>Knip</h2>\n<p><a href=\"https://knip.dev\" target=\"_blank\">Knip</a></p>\n<p>이미 잘 쓰는 사람도 있겠지만 이 패키지의 목적은<br>\n<code class=\"language-text\">Declutter your JavaScript &amp; TypeScript projects</code> 즉<br>\n코드 정리를 도와주는 아주 유용한 도구다.</p>\n<p>주로 사용하는 lint 나 다른 잡다한 도구로도 어느정도 안쓰는 코드를 정리 할 수 있지만<br>\n이 도구는 안쓰는 파일,type,interface,enum 등등 현재 코드에서 죽은 코드를<br>\n깔끔하게 알려주기 떄문에 주기적으로 프로젝트 코드를 정리할때 아주 유용하다.</p>\n<p>뭐 사용법은 홈페이지에 있으니 자세히 차근차근 보면서 따라하면 되고<br>\n나같은 경우 대부분의 프로젝트가 전부 monorepo 형식이기 때문에<br>\n이에 맞는 설정을 만들어 사용했다.</p>\n<p>간단하게 루트에 <code class=\"language-text\">knip.config.ts</code> 설정파일을 작성하고</p>\n<p>아래 예시처럼</p>\n<deckgo-highlight-code language=\"typescript\"  >\n          <code slot=\"code\">export default {\n  workspaces: {\n    &quot;packages/a-package&quot;: {\n      entry: [&quot;src/entry/index.ts&quot;],\n      project: [&quot;src/**/*.{js,ts,tsx}&quot;],\n    },\n    &quot;packages/b-package&quot;: {\n      entry: [&quot;src/entry/index.ts&quot;],\n      project: [&quot;src/**/*.{js,ts,tsx}&quot;],\n    },\n  },\n  project: &quot;tsconfig.json&quot;,\n  ignoreDependencies: [&quot;@swc/helpers&quot;, &quot;react&quot;, &quot;react-dom&quot;, &quot;core-js&quot;],\n  rules: {\n    binaries: &quot;error&quot;,\n    dependencies: &quot;error&quot;,\n    devDependencies: &quot;error&quot;,\n    exports: &quot;error&quot;,\n    files: &quot;warn&quot;,\n    nsExports: &quot;error&quot;,\n    nsTypes: &quot;error&quot;,\n    types: &quot;error&quot;,\n    enumMembers: &quot;error&quot;,\n    unlisted: &quot;off&quot;,\n  },\n  paths: {\n    &quot;@/*&quot;: [&quot;./src/*&quot;],\n    &quot;~/*&quot;: [&quot;./src/*&quot;],\n    &quot;src/*&quot;: [&quot;./src/*&quot;],\n  },\n  ignore: [\n    &quot;**/*.test.{ts,tsx}&quot;,\n    &quot;**/*.spec.{ts,tsx}&quot;,\n    &quot;**/*.stories.{ts,tsx}&quot;,\n    &quot;**/*.d.ts&quot;,\n    &quot;**/node_modules/**&quot;,\n    &quot;**/dist/**&quot;,\n    &quot;**/build/**&quot;,\n    &quot;**/storybook-static/**&quot;,\n    &quot;**/jest.config.{js,ts}&quot;,\n  ],\n}</code>\n        </deckgo-highlight-code>\n<p>실제 설정파일은 훨씬 복잡하지만..<br>\n기본 예시로 대략 이렇게 필요한 설정을 계속 추가 하면 된다.</p>\n<p>더 많은 설정은 홈페이지에서 확인하면 된다. 🥹</p>\n<h2>그래서 결과물은?</h2>\n<p>monorepo 같은 경우 위처럼 workspace 를 설정해서<br>\n<code class=\"language-text\">pnpm knip</code> 이런식으로 한번에 검사하거나,<br>\n<code class=\"language-text\">pnpm knip --workspace packages/a-package</code> 이런식으로 특정 패키지만<br>\n검사하는 것도 가능하다.</p>\n<p>한번 돌려보면</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/9d383e78d615397499b389c6975e3e20/f4b77/1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 63.51351351351351%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAAByElEQVQozz2SCY6qQBCGuYJGHXGJUfNcgefGqDQ7iIAo4/0vM99QmanETndV/UuVaLY93Gz6hqGbpj6fz6bTaa/X63a7vd/odDry5ML58Rvctbr2qypI088ksdM0jaLINM3z+Xw6nSzLOh6Pl8vlswmShmHAruv6cDicTCZaFKVZlivlOY57a4K+OI5d17VtWymVJInneb7vc8+yjLwQBUGgoVYUOWWy1O73O5g/sDRRxQil5/OJEap0QqrxI0srxKJMH+Z5CjgMQ+7X61UsqCYcxyEjyoUow5Ln+Z8y9uiACDWeXGjDCElOZDTx4DYBESnA1KDHAspMCxgpAROQ8hTbgG+NayVgMIAps2qZmVNsy3Ti8cd2FN2KolKKbo+1E+wSFgTByHoYG67X6yUDwlKWJQ1aWe5ut32aWvf7f6WsMIw2m816vV4ul3M+mtlssVj8a4I/mfyiie12y6lVlXo8vMfD/fqKwvCCKfzwJbTb7X6/Px6PR6MRl9VqJXve7/eHw0HG1nw/DoI4SX7MV9WTmRkSEfShoI9ukLvdjjlxy8AMwvIYAeWKFB04xBt+jCZwOBgM5HtutVosr67r9/sNNWBWwwq+AdrNqK9aoc6kAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"ff\"\n        title=\"ff\"\n        src=\"/static/9d383e78d615397499b389c6975e3e20/fcda8/1.png\"\n        srcset=\"/static/9d383e78d615397499b389c6975e3e20/12f09/1.png 148w,\n/static/9d383e78d615397499b389c6975e3e20/e4a3f/1.png 295w,\n/static/9d383e78d615397499b389c6975e3e20/fcda8/1.png 590w,\n/static/9d383e78d615397499b389c6975e3e20/f4b77/1.png 770w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/3d5504e9cec4ea60f670d384132cc09a/748f4/3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAv0lEQVQY002PWQqEMBBEcwZ1jIK4JOCXigsq7ooo4gLe/zRTM/2ThkC6qVfVzdq2HcfxeZ7rusIwFEI4jsM5t5QyTTMIgvM8y7L8/CtN0/d92b7vwIqi6PseLnVd+74PtQrDy3XddV2zLCM4iqJt2xjesiyGYdAUGMXatq0me56nwnEcH8fBMBqGAQ2RVODJToURk+e5ruuapiVJct/3D8a2CMdnmqau6+Z5xvK4gnKwAmDcAk3TNBDjYCllVVVfTKgwOqPPjbYAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"ff\"\n        title=\"ff\"\n        src=\"/static/3d5504e9cec4ea60f670d384132cc09a/fcda8/3.png\"\n        srcset=\"/static/3d5504e9cec4ea60f670d384132cc09a/12f09/3.png 148w,\n/static/3d5504e9cec4ea60f670d384132cc09a/e4a3f/3.png 295w,\n/static/3d5504e9cec4ea60f670d384132cc09a/fcda8/3.png 590w,\n/static/3d5504e9cec4ea60f670d384132cc09a/748f4/3.png 656w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 470px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/05eb77d0f1b94bcc39a6976a93edcab2/f96db/2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 17.567567567567565%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAzElEQVQI12WN3QqCMACFfYP+5taP2RQlkeXFZOhqGEhtWjCDFd7YRb3/Q7Tugj4O5+K7OMeZTtFkggD4ZjxGEM5dF41G0PrZ7CstrlUIzf9wOPeOx3VZeoeD17YbQpZZttQ6EGLN2IrSBcYh52UURQAA9wcIoaNUqnWq1PZySY1Jqyqp6+T5JLcbUWonZUJIVhQFxtj3fTsRx3EQBGEY2nZOJ9k01zxndX3e76umaV+vd55zzsX9/mCsMMZQSu2P1rrrOinlMAx93wshPjlCKkVCyHbMAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"ff\"\n        title=\"ff\"\n        src=\"/static/05eb77d0f1b94bcc39a6976a93edcab2/f96db/2.png\"\n        srcset=\"/static/05eb77d0f1b94bcc39a6976a93edcab2/12f09/2.png 148w,\n/static/05eb77d0f1b94bcc39a6976a93edcab2/e4a3f/2.png 295w,\n/static/05eb77d0f1b94bcc39a6976a93edcab2/f96db/2.png 470w\"\n        sizes=\"(max-width: 470px) 100vw, 470px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>스샷이 뒤죽박죽인데<br>\n하여튼 이런식으로 사용되지 않는 파일이나 함수,변수,interface 등등<br>\n현재 프로젝트에서 죽은 코드들을 싹 알려준다.</p>\n<blockquote>\n<p>주의할 점은 위 설정파일에서 있는 <code class=\"language-text\">entry</code> 배열 기준으로 정리하기 때문에<br>\n<code class=\"language-text\">entry</code> 설정을 정확히 해야 정확한 결과를 가져온다.</p>\n</blockquote>\n<p><code class=\"language-text\">module federation</code> 을 사용하는 경우에도 export 하는 파일의 이름,<br>\nBarrel 방식 이라면 내보내는 index.ts 를 entry 에 넣어주면<br>\n잘 작동한다.</p>\n<p>봄이 가고 이제 여름이 시작되니 더 더워지기 전에<br>\n코드 청소 한번 하는게 좋지 않을까</p>","frontmatter":{"title":"Knip 와 함께 dead code 정리","date":"May 15, 2025","description":"방이 이게 뭐니 청소좀 해라 청소좀"}}},"pageContext":{"slug":"/2025-05-15/","previous":{"fields":{"slug":"/2024-12-11/"},"frontmatter":{"title":"Passkey.io"}},"next":null}},"staticQueryHashes":["2841359383","3490846071"]}